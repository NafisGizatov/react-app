(this.webpackJsonphommbattle=this.webpackJsonphommbattle||[]).push([[0],{31:function(e,t,n){e.exports=n(56)},36:function(e,t,n){},42:function(e,t){},44:function(e,t){},56:function(e,t,n){"use strict";n.r(t);var o=n(0),s=n.n(o),i=n(28),a=n.n(i),d=(n(36),n(8)),c=n(9),l=n(11),r=n(10),u=n(19),w=n.n(u),h=n(29),p=n(30),m=1,v=function(e){Object(l.a)(n,e);var t=Object(r.a)(n);function n(e){var o;return Object(d.a)(this,n),(o=t.call(this,e)).activate=function(){o._updateIndex(),o.setState({isBlured:!1,zIndex:++m})},o._onMouseDown=function(e){o.setState({isBlured:!1,zIndex:++m,windowDragAndDrop:!0,dX:e.clientX-o.state.windowLeft,dY:e.clientY-o.state.windowTop})},o._onMouseUp=function(){o.setState({windowDragAndDrop:!1})},o._onMouseMove=function(e){e.persist(),o.state.windowDragAndDrop&&o.setState({windowTop:e.clientY-o.state.dY,windowLeft:e.clientX-o.state.dX})},o._onClose=function(){o.setState({isClosed:!0})},o._toggleCollaps=function(){o.setState({collapsed:!o.state.collapsed})},o._reculcIndex=function(){o.setState({isBlured:o.state.zIndex!==m})},o._updateIndex=function(){window.dispatchEvent(new Event("reculcIndex"))},o.state={isBlured:!1,collapsed:!1,question:{},zIndex:++m,isClosed:!1,dX:0,dY:0,windowHeight:300,windowWidth:500,windowTop:8,windowLeft:80,windowDragAndDrop:!1},o}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=Object(h.a)(w.a.mark((function e(){var t,n=this;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=new XMLHttpRequest).open("GET","https://db.chgk.info/xml/random/from_2012-01-01/limit1/",!0),t.onload=function(){if(4===t.readyState)if(200===t.status){var e,o,s=p.xml2js(t.response,{compact:!0}),i=null===s||void 0===s||null===(e=s.search)||void 0===e?void 0:e.question,a=null===i||void 0===i||null===(o=i.Question)||void 0===o?void 0:o._text.replace(/\r?\n/g," "),d=a.match(/(.*?)<\u0440\u0430\u0437\u0434\u0430\u0442\u043a\u0430>(.*?)<\/\u0440\u0430\u0437\u0434\u0430\u0442\u043a\u0430>/);console.log(d);var c=a.match(/\(pic: (.*)\)/);(null===d||void 0===d?void 0:d.length)&&(i.BeforeQuestion=d[2],a=a.replace(d[0],"")),(null===c||void 0===c?void 0:c.length)&&(i.Pic=c[1],a=a.replace(c[0],"")),i.Question._text=a,i&&n.setState({question:i})}else console.error(t.statusText)},t.onerror=function(){console.error(t.statusText)},t.send(null),window.addEventListener("reculcIndex",this._reculcIndex),this._updateIndex();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getWindowStyle",value:function(){return{width:this.state.windowWidth,height:this.state.windowHeight,top:this.state.windowTop,left:this.state.windowLeft,zIndex:this.state.zIndex}}},{key:"render",value:function(){var e,t,n;return s.a.createElement("div",{className:(this.state.isBlured?"is-blured":"")+" window_XP "+(this.state.isClosed?"is-hidden":""),onClick:this._updateIndex,style:this._getWindowStyle()},s.a.createElement("div",{className:"windowBar "+(this.state.windowDragAndDrop?"cursor-pointer":""),onMouseDown:this._onMouseDown,onMouseUp:this._onMouseUp,onMouseMove:this._onMouseMove,onMouseLeave:this._onMouseUp},s.a.createElement("div",{className:"closeButton cursor-pointer",onClick:this._onClose},"X")),s.a.createElement("div",{className:"windowMain",onMouseDown:this.activate},s.a.createElement("div",{className:"question"},this.state.question.Pic?s.a.createElement("div",{className:"QuestionPic"},s.a.createElement("img",{alt:this.state.question.Pic,src:"https://db.chgk.info/images/db/"+this.state.question.Pic})):"",this.state.question.BeforeQuestion?s.a.createElement("div",{className:"BeforeQuestion"},this.state.question.BeforeQuestion):"",null===(e=this.state.question.Question)||void 0===e?void 0:e._text),s.a.createElement("div",{className:""},s.a.createElement("span",{onClick:this._toggleCollaps,className:"cursor-pointer"},"\u27ad ... "),s.a.createElement("span",{className:"answer "+(this.state.collapsed?"":"is-hidden")},null===(t=this.state.question.Answer)||void 0===t?void 0:t._text),s.a.createElement("div",{className:this.state.collapsed?"":"is-hidden"},null===(n=this.state.question.Comments)||void 0===n?void 0:n._text))),s.a.createElement("div",{className:"windowFooter"}))}}]),n}(s.a.Component),f=function(e){Object(l.a)(n,e);var t=Object(r.a)(n);function n(e){var o;return Object(d.a)(this,n),(o=t.call(this,e))._onClick=function(){var e=s.a.createElement(v,{key:Math.random().toString()});o.setState({windows:o.state.windows.concat([e])})},o.state={windows:[]},o}return Object(c.a)(n,[{key:"_getWindows",value:function(){return s.a.createElement("div",{className:"MainWindow"},[s.a.createElement("div",{className:"addButton",key:"adddBtn",onClick:this._onClick},"+")].concat(this.state.windows))}},{key:"render",value:function(){return this._getWindows()}}]),n}(s.a.Component);a.a.render(s.a.createElement(f,null),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.65b76e88.chunk.js.map