{"version":3,"sources":["window.tsx","main.tsx","index.tsx"],"names":["commonZindex","WindowXP","props","activate","setState","zIndex","_onMouseDown","event","windowDragAndDrop","dX","clientX","state","windowLeft","dY","clientY","windowTop","_onMouseUp","_onMouseMove","persist","_onClose","isClosed","_toggleCollaps","collapsed","question","windowHeight","windowWidth","xhr","XMLHttpRequest","open","onload","readyState","status","answer","convert","response","compact","search","qText","Question","_text","replace","beforeQuestionArr","match","console","log","picArr","length","BeforeQuestion","Pic","error","statusText","onerror","send","width","this","height","top","left","className","style","_getWindowStyle","onMouseDown","onMouseUp","onMouseMove","onMouseLeave","onClick","alt","src","Answer","Comments","React","Component","Main","_onClick","windows","concat","key","Math","random","toString","_getWindows","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.3834b8d0.chunk.js","sourcesContent":["import React, { MouseEvent as reactMouseEvent} from 'react';\nimport * as convert from 'xml-js';\n\ninterface IProps {\n}\n\ninterface IParcedString {\n  _text: string;\n}\n\ninterface IState {\n  collapsed: boolean;\n  windowHeight: number;\n  windowWidth: number;\n  windowTop: number;\n  windowLeft: number;\n  windowDragAndDrop: boolean;\n  dX: number;\n  dY: number;\n  isClosed: boolean;\n  zIndex: number;\n  question: Partial<{\n    BeforeQuestion?: string;\n    Question: IParcedString;\n    Answer: IParcedString;\n    Comments: IParcedString;\n    Author: IParcedString;\n    Pic?: string;\n  }>;\n}\n\nlet commonZindex = 1;\n\nclass WindowXP extends React.Component<IProps, IState> {\n    constructor(props: object) {\n      super(props);\n        this.state = {\n            collapsed: false,\n            question: {},\n            zIndex: ++commonZindex,\n            isClosed: false,\n            dX: 0,\n            dY: 0,\n            windowHeight: 300,\n            windowWidth: 500,\n            windowTop: 8,\n            windowLeft: 80,\n            windowDragAndDrop: false\n        }\n    }\n\n    async componentDidMount(): Promise<void> {\n      var xhr = new XMLHttpRequest()\n      xhr.open(\"GET\", 'https://db.chgk.info/xml/random/from_2012-01-01/limit1/', true);\n      xhr.onload = () => {\n        if (xhr.readyState === 4){\n          if (xhr.status === 200){\n            const answer = convert.xml2js(xhr.response, {compact: true}) as {search: any};\n            const question = answer?.search?.question;\n            let qText = question?.Question?._text.replace(/\\r?\\n/g, ' ');\n\n            const BEFORE_QUEST_REGEXP = /(.*?)<раздатка>(.*?)<\\/раздатка>/;\n            const beforeQuestionArr = qText.match(BEFORE_QUEST_REGEXP);\n            console.log(beforeQuestionArr);\n            const PIC_REGEXP = /\\(pic: (.*)\\)/;\n            const picArr = qText.match(PIC_REGEXP);\n\n            if (beforeQuestionArr?.length) {\n              question.BeforeQuestion = beforeQuestionArr[2];\n              qText = qText.replace(beforeQuestionArr[0], '');\n            }\n\n            if (picArr?.length) {\n              question.Pic = picArr[1];\n              qText = qText.replace(picArr[0], '');\n            }\n\n            question.Question._text = qText;\n            if (question) {\n              this.setState({\n                question: question\n              })\n            }\n          } else {\n            console.error(xhr.statusText)\n          }\n        }\n      }\n      xhr.onerror = function(){\n        console.error(xhr.statusText)\n      }\n      xhr.send(null);\n    }\n\n    activate = () => {\n      this.setState({\n        zIndex: ++commonZindex\n      })\n    }\n\n    private _onMouseDown = (event: reactMouseEvent<HTMLDivElement, MouseEvent>) => {\n      this.setState({\n        zIndex: ++commonZindex,\n        windowDragAndDrop: true,\n        dX: event.clientX - this.state.windowLeft,\n        dY: event.clientY - this.state.windowTop\n      })\n    }\n\n    private _onMouseUp = () => {\n      this.setState({\n        windowDragAndDrop: false\n      })\n    }\n\n    private _onMouseMove= (event: reactMouseEvent<HTMLDivElement, MouseEvent>) => {\n      event.persist();\n      if (this.state.windowDragAndDrop) {\n        this.setState({\n          windowTop: event.clientY - this.state.dY,\n          windowLeft: event.clientX - this.state.dX\n        })\n      }\n    }\n\n    private _getWindowStyle(): object {\n      return {\n        width: this.state.windowWidth,\n        height: this.state.windowHeight,\n        top: this.state.windowTop,\n        left: this.state.windowLeft,\n        zIndex: this.state.zIndex\n      }\n    }\n\n    private _onClose = () =>{\n        this.setState({\n          isClosed: true\n        })\n    }\n\n    private _toggleCollaps = () => {\n      this.setState({\n        collapsed: !this.state.collapsed\n      });\n    }\n\n    render() {\n        return (\n          <div className={\"window_XP \" + (this.state.isClosed ? 'is-hidden' : '')} style={this._getWindowStyle()}>\n            <div className={\"windowBar \" + (this.state.windowDragAndDrop ? 'cursor-pointer' : '')}\n                onMouseDown={this._onMouseDown}\n                onMouseUp={this._onMouseUp} \n                onMouseMove={this._onMouseMove}\n                onMouseLeave={this._onMouseUp} \n            >   \n            <div className=\"closeButton cursor-pointer\" onClick={this._onClose}>X</div>\n            </div>\n            <div className=\"windowMain\" onMouseDown={this.activate}>\n              <div className=\"question\">\n                {this.state.question.Pic ? <div className=\"QuestionPic\"><img alt={this.state.question.Pic} src={\"https://db.chgk.info/images/db/\" + this.state.question.Pic}/></div> : ''}\n                {this.state.question.BeforeQuestion ? <div className=\"BeforeQuestion\">{this.state.question.BeforeQuestion}</div> : ''}\n                {this.state.question.Question?._text}\n              </div>\n              <div className=\"\">\n                <span onClick={this._toggleCollaps} className=\"cursor-pointer\">&#10157; ... </span>\n                <span className={\"answer \" + (this.state.collapsed ? '' : 'is-hidden')}>{this.state.question.Answer?._text}</span>\n                <div className={this.state.collapsed ? '' : 'is-hidden'}>\n                  {this.state.question.Comments?._text}\n                </div>\n              </div>\n            </div>\n            <div className=\"windowFooter\"></div>\n          </div>\n        );\n      }\n}\n\nexport default WindowXP;","import React from 'react';\nimport WindowXP from './window';\n\ninterface IProps {\n}\n\ninterface IState {\n  windows: any\n}\n\nclass Main extends React.Component<IProps, IState> {\n    constructor(props: object) {\n      super(props);\n        this.state = {\n            windows: []\n        }\n    }\n\n    private _onClick = () => {\n      this.setState({\n        windows: this.state.windows.concat([<WindowXP key={Math.random().toString()}/>])\n      })\n    }\n\n    private _getWindows(): any {\n      return <div className=\"MainWindow\">\n          {[<div className=\"addButton\" key=\"adddBtn\" onClick={this._onClick}>+</div>].concat(this.state.windows)}\n        </div>\n    }\n\n    render() {\n        return this._getWindows();\n      }\n}\n\nexport default Main;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Main from './main';\n\n\nReactDOM.render(<Main />, document.getElementById('root'));\n"],"sourceRoot":""}